window.__require=function e(t,o,r){function n(i,a){if(!o[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var h=o[i]={exports:{}};t[i][0].call(h.exports,function(e){return n(t[i][1][e]||e)},h,h.exports,e,t,o,r)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<r.length;i++)n(r[i]);return n}({main:[function(e,t,o){"use strict";cc._RF.push(t,"342efoswVlL9bpG4+oDUE4I","main");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=this&&this.__decorate||function(e,t,o,r){var n,c=arguments.length,i=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,o,i):n(t,o))||i);return c>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphic_line=null,t._cur_length=0,t}return n(t,e),t.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.graphic_line.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.graphic_line.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.graphic_line.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.graphic_line.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.onTouchStart=function(){this.graphic_line.clear()},t.prototype.onTouchMove=function(e){this.graphic_line.clear(),this._cur_length=0;var t=e.getStartLocation(),o=e.getLocation();this.drawRayCast(t,o.subSelf(t).normalizeSelf()),this.graphic_line.stroke()},t.prototype.onTouchEnd=function(){this.graphic_line.clear()},t.prototype.drawRayCast=function(e,t){var o=1440-this._cur_length;if(!(o<=0)){var r=e.add(t.mul(o)),n=cc.director.getPhysicsManager().rayCast(e,r,cc.RayCastType.Closest);if(n.length>0){console.log(n);var c=n[0],i=c.point;this.drawAimLine(e,i);var a=i.sub(e).mag();this._cur_length+=a;var s=c.normal,p=t,h=p.sub(s.mul(2*p.dot(s)));this.drawRayCast(i,h)}else this.drawAimLine(e,r)}},t.prototype.drawAimLine=function(e,t){var o=this.graphic_line.node.convertToNodeSpaceAR(e);this.graphic_line.moveTo(o.x,o.y);var r=t.sub(e),n=Math.round(r.mag()/20);r.normalizeSelf().mulSelf(20);for(var c=0;c<n;c++)o.addSelf(r),this.graphic_line.circle(o.x,o.y,2)},c([s({type:cc.Graphics,tooltip:"\u7784\u51c6\u7ebf\u4f5c\u56fe"})],t.prototype,"graphic_line",void 0),c([a],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"c6ce9XGorxPFohYDtTdXqU9","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","main"]);